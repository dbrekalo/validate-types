!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).validateTypes=t()}(this,(function(){"use strict";function e(){return[{name:"required",validate:function(e){var t=Boolean(e.testConfig),n=e.fieldValue;return t&&void 0!==n},message:function(e){return'Field "'+e.fieldName+'" is required'},skipFurtherTests:function(e){return!e.validateResult},testUndefinedValues:!0},{name:"type",validate:function(e){return function(e,n){if(Array.isArray(n)){for(var r=!1,a=0;a<n.length;a++)if(t(e,n[a])){r=!0;break}return r}return t(e,n)}(e.fieldValue,e.testConfig)},message:function(e){return'Field "'+e.fieldName+'" is of invalid type'},skipFurtherTests:function(e){return!e.validateResult}},{name:"validator",validate:function(e){return Boolean(e.testConfig(e.fieldValue))},message:function(e){return'Field "'+e.fieldName+'" failed validation'}}]}function t(e,t){var n=!1,r=typeof e,a=function(e){n=r===e};switch(t){case String:a("string");break;case Number:a("number");break;case Boolean:a("boolean");break;case Function:a("function");break;case Array:n=Array.isArray(e);break;case Object:n="object"===r&&null!==e&&!Array.isArray(e);break;default:n=e instanceof t}return n}function n(e){return!0===Boolean(e)&&"object"==typeof e&&e.constructor===Object}return function t(r){var a=[],i={},s=function(e,t,r){var i={},s=[],u={};t=t||{},r=r||{};return Object.keys(e).forEach((function(u){var o=e[u];!function(n,u){var o=!1===r.assignDefaults?void 0:"function"==typeof u.default?u.default():u.default,f=void 0!==t[n]?t[n]:o,c=void 0===f;c||(i[n]=f),function(e,t){for(var n=0;n<e.length&&!1!==t(e[n]);n++);}(a,(function(a){var i=u[a.name];if(void 0!==i&&(!c||a.testUndefinedValues)){var o={fieldValue:f,fieldName:n,fieldSchema:u,testConfig:i,input:t,schema:e};if(!(o.validateResult=a.validate(o))){var d=r.messages&&r.messages[n]&&r.messages[n][a.name]||a.message;s.push({field:n,test:a.name,message:"function"==typeof d?d(o):d})}return(!a.skipFurtherTests||!a.skipFurtherTests(o))&&void 0}}))}(u,n(o)?o:{type:o})})),Object.keys(t).forEach((function(n){e[n]||(u[n]=t[n])})),{hasErrors:s.length>0,hasUndeclaredFields:Object.keys(u).length>0,errors:s,data:i,undeclaredFields:u}};return s.addTest=function(e){return i[e.name]=e,a.push(e),s},s.removeTest=function(e){return delete i[e],a=a.filter((function(t){return t.name!==e})),s},s.getTest=function(e,t){var n,r,a=i[e];return a?t?a:(n={},r=a,Object.keys(r).forEach((function(e){n[e]=r[e]})),n):void 0},s.setTestMessage=function(e,t){return s.getTest(e,!0).message=t,s},s.validateValue=function(e,t){var n=s({field:t},{field:e});return{hasErrors:n.hasErrors,errors:n.errors.map((function(e){return{test:e.test}}))}},s.extractDefaults=function(e){var t={};return Object.keys(e).forEach((function(r){var a=e[r],i=n(a)?a.default:void 0,s=typeof i;if("undefined"!==s){var u="function"===s?i():i;void 0!==u&&(t[r]=u)}})),t},s.createValidator=t,(r||e()).forEach((function(e){s.addTest(e)})),s}()}));
